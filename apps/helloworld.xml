<?xml version="1.0" encoding="UTF-8" ?> 
<Module>
  <ModulePrefs title="twitter search sample">
  	<Require feature="opensocial-0.8"/>
  </ModulePrefs> 
  <Content type="html">
     <![CDATA[ 
     	<script type="text/javascript">
	     	/**
	     	 * mixi アプリ :
	     	 * @see http://apiwiki.twitter.com/Twitter-Search-API-Method%3A-search
	     	 * @see http://code.google.com/intl/ja/apis/gadgets/docs/remote-content.html#Fetch_JSON
	     	 */
     		function search_twitter() {
     			var search_word = document.getElementById('search_word').value;
     			
     			var url = "http://search.twitter.com/search.json";
     			url += ("?q=" + encodeURIComponent(search_word));

     			var params = {};
	    		params[gadgets.io.RequestParameters.METHOD] = gadgets.io.MethodType.GET;
	    		params[gadgets.io.RequestParameters.CONTENT_TYPE] = gadgets.io.ContentType.JSON;
     			gadgets.io.makeRequest(url, searchResponse, params);
     		}
     		function searchResponse(responseObj) {
     			var html = "";
     			var jsondata = responseObj.data
     			var results = jsondata['results'];
     			for (var i=0; i<results.length; i++) {
     				html += results[i]['text'] + "</br>";
     			
     			}
     			document.getElementById('content_div').innerHTML = html;
		      	
     		}
       	</script>
       	<input type="text" size="10" id="search_word"/><input type="button" name="search" value="search" onclick="javascript:search_twitter();"/>
       	<div id="content_div"/>
     ]]>
  </Content> 
</Module>
