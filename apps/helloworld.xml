<?xml version="1.0" encoding="UTF-8" ?> 
<Module>
  <ModulePrefs title="acitivity_test">
  	<Require feature="opensocial-0.8"/>
  </ModulePrefs> 
  <Content type="html">
	<![CDATA[ 
    	<script type="text/javascript">
			
			  /**
			   * Create the new activity and send it to the server.
			   */
			  function postActivity(text) {  
			    var params = {};  
			    params[opensocial.Activity.Field.TITLE] = text;
			    var activity = opensocial.newActivity(params); 
			    opensocial.requestCreateActivity(activity, opensocial.CreateActivityPriority.HIGH, callback);
			  	var div = document.getElementById('content_div');
			    div.innerHTML = "Activity title is: " + activity.getField(opensocial.Activity.Field.TITLE);
			  };        
			  
			  /**
			  * Server calls this function to indicate whether the activity post succeeded or failed.
			  */
			  function callback(status) {
			    if (status.hadError())
			    {
			      alert("Error creating activity.");
			    }
			    else 
			    {
			      alert("Activity successfully created.");
			    }
			  };
			  
			  /**
			   * Start the process of posting an activity.
			   */
			  function startActivity() {
			    postActivity("This is a sample activity, created at " + new Date().toString());
			  };
			
			  //Call startActivity as soon as the gadget finishes loading.
			    gadgets.util.registerOnLoadHandler(startActivity);
		</script>
		<div id="content_div"></div>
	]]>
  </Content> 
</Module>
