<?xml version="1.0" encoding="UTF-8" ?> 
<Module>
  <ModulePrefs title="list_friends">
  	<Require feature="opensocial-0.8"/>
  </ModulePrefs> 
  <Content type="html">
     <![CDATA[ 
     	<script type="text/javascript">
	        function request() {
	        	var idspec = opensocial.newIdSpec({ "userId" : "VIEWER", "groupId" : "FRIENDS" });
				var req = opensocial.newDataRequest();
				req.add(req.newFetchPersonRequest(idspec), "friends");
				req.send(response);
	        }
	        function response(dataResponse) {
	        	var friends = dataResponse.get("friends").getData();
	        	document.getElementById("friend_list").innerHTML = printFriendsList(friends);
	        }
	        function printFriendsList(friends) {
				var html = "";
				for (var i=0; i<friends.size; i++) {
					html += friends[i].getDisplayName(); + "<br>";
				}
				return html;
	        }
	        gadgets.util.registerOnLoadHandler(request);
       	</script>
       	<div id="friend_list"/>
     ]]>
  </Content> 
</Module>
