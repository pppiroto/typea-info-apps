<?xml version="1.0" encoding="UTF-8" ?> 
<Module>
  <ModulePrefs title="hello world example">
  	<Require feature="opensocial-0.8"/>
  </ModulePrefs> 
  <Content type="html">
     <![CDATA[ 
     	<script type="text/javascript">
	        function request() {
	            var req = opensocial.newDataRequest();
                req.add(req.newFetchPeesonRequest("VIEWER"), "viewer");
	            req.send(response);
	        }
	
	        function response(dataResponse) {
	            var viewer = dataResponse.get("viewer").getData();
	    		document.getElementById("viewer_inf").innerHTML 
					= printPropertiesAsTable(viewer);
	        }
	        function printPropertiesAsTable(obj) {
	        	var tbl = "<table>";
			
				for (prop in obj) {
					tbl += "<tr>";
					tbl += "<td>" + prop + "</td>";
					tbl += "<td>" + obj[prop] + "</td>";
					tbl += "</tr>";
				}
	        	tbl += "</table>";
	        	return tbl;
	        }
	        gadgets.util.registerOnLoadHandler(request);
       	</script>
		<div id="viewer_inf"/>
     ]]>
  </Content> 
</Module>
