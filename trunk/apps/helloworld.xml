<?xml version="1.0" encoding="UTF-8" ?> 
<Module>
  <ModulePrefs title="hello world example">
  	<Require feature="opensocial-0.8"/>
  </ModulePrefs> 
  <Content type="html">
     <![CDATA[ 
     	<script type="text/javascript">
	        function request() {
				var req = opensocial.newDataRequest();
				req.add(req.newFetchPersonRequest("VIEWER"), "viewer_data");
				req.send(response);
	        }
	
	        function response(dataResponse) {
				var viewer = dataResponse.get("viewer_data").getData();
    			document.getElementById("viewer_inf").innerHTML 
					= printPropertiesAsTable(viewer);
	        }
	        function printPropertiesAsTable(obj) {
	        	var tbl = "<table border='1'>";
			    tbl += "<tr><th>Property</th><th>Type</th><th>Value</th></tr>";
				for (prop in obj) {
					var type  = typeof(eval("obj." + prop));
					var blnkt = (type == "function")?"()":""; 
					tbl += "<tr>";
					tbl += "<td>" + prop + "</td>";
					tbl += "<td>" + type + "</td>";
					tbl += "<td>" + eval("obj." + prop + blnkt) + "</td>";
					tbl += "</tr>";
				}
	        	tbl += "</table>";
	        	return tbl;
	        }
	        gadgets.util.registerOnLoadHandler(request);
       	</script>
		<div id="viewer_inf"/>
     ]]>
  </Content> 
</Module>
