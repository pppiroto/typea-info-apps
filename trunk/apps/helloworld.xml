<?xml version="1.0" encoding="UTF-8" ?> 
<Module>
  <ModulePrefs title="list_friends">
  	<Require feature="opensocial-0.8"/>
  </ModulePrefs> 
  <Content type="html">
     <![CDATA[ 
     	<script type="text/javascript">
	        function request() {
	        	var idspec = opensocial.newIdSpec({ "userId" : "VIEWER", "groupId" : "FRIENDS" });
				var req = opensocial.newDataRequest();
				req.add(req.newFetchPersonRequest(idspec), "friends");
				req.send(response);
	        }
	        function response(dataResponse) {
	        	var friends = dataResponse.get("friends").getData();
	        	document.getElementById("friend_list").innerHTML = printFriendsList(friends);
	        }
	    	function printFriendsList(friends) {
	    		var html = "<table>"
	    		
	    		for (friend in friends) {
					html += "<tr>";
					html += "<td>" + friend.getDisplayName() + "</td>";	    		
					html += "</tr>";	    		
	    		}
	    		return html;
	    	}
	        gadgets.util.registerOnLoadHandler(request);
       	</script>
       	<div id="friends_list"/>
     ]]>
  </Content> 
</Module>
