{% extends "base.html" %}
{% block html_header %}

	<script type="text/javascript" src="/js/jquery-ui-1.7.2.custom.min.js"></script>
	<script type="text/javascript" src="/js/jquery.chromatable.js"></script>
	<script type="text/javascript"><!-- 
	$(document).ready(function(){
		$("#projects_table").chromatable({
			width:    "520px",
			height:   "120px",
			scrolling:  "yes"
		});
		$.getJSON("/functionpoint/listproject", 
				function (json) {
					if (json.error) {
						error_msg(json.error);
					} else {
		
						var html = "";
						for (var i=0; i< json.items.length; i++) {
							html += projecttable_row_html(json.items[i]);
						}
						$("#projects_table tbody").append(html);
		
					}
					processing_msg();
				});
	});
	function create_new_project() {
		var url = "/functionpoint/createproject";

		var data = new Object();
		data['create_system_name']      = $("#create_system_name").val();
		data['create_application_name'] = $("#create_application_name").val();
		data['create_mesurement_type']  = $("#create_mesurement_type").val();
		
		error_msg();
		processing_msg(PROCESSING_MSG);

		$.getJSON(url, data, 
				function (json) {
					if (json.error) {
						error_msg(json.error);
					} else {
						var html = projecttable_row_html(json);
						$("#projects_table tbody").append(html);
					}
					processing_msg();
				});
	}
	function projecttable_row_html(row) {
		return "<tr><td>" + row.system_name + "</td>" +
			       "<td><a href='" + row.key + "'>" + row.application_name + "</a></td>" +
        		   "<td>" + row.mesurement_type_name + "</td></tr>";
	}
	//--></script>
	<title></title>
{% endblock %}
{% block content %}
	<h3>Projects</h3>
	
	<div id="new_project_profile">
		<div>new project</div>
		system name:
		<input type="text" id="create_system_name" value="test1" maxlength="30"/>
		application name:
		<input type="text" id="create_application_name" value="test2" maxlength="30"/>
		mesurement type:
		<select id="create_mesurement_type">
		{% for itm in mesurement_type %}
			<option value="{{itm.0}}">{{itm.1}}</option>
		{% endfor %}
		</select>
		<input type="button" value="create" onclick="javascript:create_new_project();"/>
		<input type="button" value="close" onclick="javascript:show_project_profile(false);"/>
	</div>
	<table id="projects_table" style="width:520px;table-layout: fixed;">
		<col width="200px;"/>
		<col width="200px;"/>
		<col width="100px;"/>
		<thead><tr><th>System Name</th><th>Application Name<th>Mesurment Type</th></tr></thead>
		<tbody></tbody>
	</table>

	<div id="new_data_function">
		<select id="create_datafunction_type">
		{% for itm in datafunction_type %}
			<option value="{{itm.0}}">{{itm.1}}</option>
		{% endfor %}
		</select>
	</div>	
	
	
	
{% endblock %}